{% extends "base.html" %}
{% block title %}日记墙{% endblock %}
{% block page_title %}日记墙{% endblock %}
{% block extra_style %}
<style>
    .mdui-appbar {
        background: #ffffff !important;
        border-bottom: 1px solid #e0e0e0 !important;
    }
    .diary-card {
        background: #ffffff;
        border: 1px solid #e0e0e0;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        margin-bottom: 20px;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
    }
    .diary-card-content {
        max-height: 300px;
        overflow: auto;
    }
    .no-diary-card {
        text-align: center;
        color: #555; /* 调整文字颜色 */
        font-size: 1.5em; /* 增大字体大小 */
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        padding: 200px 0; /* 大幅增加上下内边距 */
        background: linear-gradient(150deg, #f8f8f8, #eaeaea), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect x="0" y="0" width="100" height="100" fill="none" stroke="%23ccc" stroke-width="1" /></svg>');
        background-size: cover, 20px 20px;
        border-radius: 12px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    }
    .no-diary-card i {
        font-size: 4em;
        margin-bottom: 30px;
        display: block;
        color: #888;
    }
    .mood-text {
        font-size: 0.9em;
        color: #666;
        padding: 2px 8px;
        border-radius: 4px;
        background: #f5f5f5;
        white-space: nowrap;
    }
    .empty-state {
        text-align: center;
        padding: 48px 24px;
    }
    .empty-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 16px;
    }
    .empty-content i {
        font-size: 48px;
        color: rgba(0,0,0,.2);
    }
    .empty-content p {
        font-size: 16px;
        color: rgba(0,0,0,.6);
        margin: 0;
    }
</style>
{% endblock %}
{% block content %}
<div class="mdui-container">
    {% if diary_list %}
        {% for diary in diary_list %}
        <div class="diary-card mdui-card">
            <div class="diary-card-header">
                <div class="title-section">
                    <div class="title-mood">
                        <h2 class="diary-title">{{ diary.title }}</h2>
                        <span class="mood-text">
                            {%- if diary.mood -%}
                                心情{{ diary.mood }}
                            {%- else -%}
                                无心情
                            {%- endif -%}
                        </span>
                    </div>
                    <div class="meta-info">
                        <span class="diary-date">{{ diary.created_at.strftime('%Y-%m-%d') }}</span>
                        <span class="diary-location">
                            <i class="mdui-icon material-icons">location_on</i>
                            {{ diary.location or '未知位置' }}
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="diary-card-content mdui-typo">
                {{ diary.content }}
            </div>
        </div>
        {% endfor %}
        
        <div class="pagination">
            {% if page > 1 %}
            <a href="?page={{ page-1 }}">上一页</a>
            {% endif %}
            <a href="#" class="active">{{ page }}</a>
            {% if has_next %}
            <a href="?page={{ page+1 }}">下一页</a>
            {% endif %}
        </div>
    {% else %}
    <div class="diary-card mdui-card">
        <div class="mdui-card-header">
            <img class="mdui-card-header-avatar" src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23666' d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z'/></svg>"/>
            <div class="mdui-card-header-title">还没有日记</div>
            <div class="mdui-card-header-subtitle">来写第一篇吧</div>
        </div>
        <div class="mdui-card-content empty-state">
            <div class="empty-content">
                <i class="mdui-icon material-icons">public</i>
                <p>还没有人来写日记呢</p>
                <a href="/add" class="mdui-btn mdui-btn-raised mdui-ripple mdui-color-theme">
                    来写第一篇日记吧
                </a>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}